<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mawaquit - Islamic Prayer Times with Isochrone Visualization</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css">

    <!-- Configure Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1976D2',
                        secondary: '#0D47A1',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-primary text-white px-4 py-3 shadow-md">
        <h1 class="text-xl font-bold">Mawaquit - Prayer Times & Isochrones</h1>
    </header>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col md:flex-row overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-full md:w-80 bg-white shadow-lg flex flex-col overflow-y-auto">
            <!-- Country & Method Selection -->
            <section class="p-4 border-b">
                <h2 class="text-lg font-semibold text-gray-700 mb-3">Settings</h2>

                <div class="mb-3">
                    <label for="country-select" class="block text-sm font-medium text-gray-600 mb-1">Country</label>
                    <select id="country-select" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent">
                        <option value="">Select a country...</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="method-select" class="block text-sm font-medium text-gray-600 mb-1">Calculation Method</label>
                    <select id="method-select" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent">
                        <option value="MWL">Muslim World League</option>
                        <option value="ISNA">Islamic Society of North America</option>
                        <option value="Egypt">Egyptian General Authority</option>
                        <option value="Makkah">Umm Al-Qura, Makkah</option>
                        <option value="Karachi">University of Islamic Sciences, Karachi</option>
                        <option value="Tehran">Institute of Geophysics, Tehran</option>
                        <option value="Jafari">Shia Ithna-Ashari, Qum</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="date-input" class="block text-sm font-medium text-gray-600 mb-1">Date</label>
                    <input type="date" id="date-input" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>

                <div class="flex gap-2">
                    <label class="flex items-center text-sm text-gray-600">
                        <input type="checkbox" id="show-level2" class="mr-2 rounded">
                        Admin Level 2
                    </label>
                </div>
            </section>

            <!-- Prayer Times Display -->
            <section class="p-4 border-b">
                <h2 class="text-lg font-semibold text-gray-700 mb-3">Prayer Times</h2>

                <div id="coordinates" class="text-sm text-gray-500 mb-2">
                    Click on the map to select a location
                </div>

                <div id="prayer-times" class="space-y-2">
                    <div class="flex justify-between items-center py-1">
                        <span class="font-medium text-gray-700">Fajr</span>
                        <span id="time-fajr" class="text-primary font-semibold">--:--</span>
                    </div>
                    <div class="flex justify-between items-center py-1">
                        <span class="font-medium text-gray-700">Sunrise</span>
                        <span id="time-sunrise" class="text-primary font-semibold">--:--</span>
                    </div>
                    <div class="flex justify-between items-center py-1">
                        <span class="font-medium text-gray-700">Dhuhr</span>
                        <span id="time-dhuhr" class="text-primary font-semibold">--:--</span>
                    </div>
                    <div class="flex justify-between items-center py-1">
                        <span class="font-medium text-gray-700">Asr</span>
                        <span id="time-asr" class="text-primary font-semibold">--:--</span>
                    </div>
                    <div class="flex justify-between items-center py-1">
                        <span class="font-medium text-gray-700">Maghrib</span>
                        <span id="time-maghrib" class="text-primary font-semibold">--:--</span>
                    </div>
                    <div class="flex justify-between items-center py-1">
                        <span class="font-medium text-gray-700">Isha</span>
                        <span id="time-isha" class="text-primary font-semibold">--:--</span>
                    </div>
                </div>
            </section>

            <!-- Isochrone Controls -->
            <section class="p-4 border-b">
                <h2 class="text-lg font-semibold text-gray-700 mb-3">Isochrone Curves</h2>

                <div class="grid grid-cols-2 gap-2 mb-3">
                    <button id="iso-fajr" class="iso-btn px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md transition-colors">
                        Fajr
                    </button>
                    <button id="iso-dhuhr" class="iso-btn px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md transition-colors">
                        Dhuhr
                    </button>
                    <button id="iso-asr" class="iso-btn px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md transition-colors">
                        Asr
                    </button>
                    <button id="iso-maghrib" class="iso-btn px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md transition-colors">
                        Maghrib
                    </button>
                    <button id="iso-isha" class="iso-btn px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md transition-colors col-span-2">
                        Isha
                    </button>
                </div>

                <button id="clear-isochrones" class="w-full px-3 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors">
                    Clear Curves
                </button>
            </section>

            <!-- Instructions -->
            <section class="p-4 text-sm text-gray-600">
                <h2 class="text-lg font-semibold text-gray-700 mb-2">Instructions</h2>
                <ol class="list-decimal list-inside space-y-1">
                    <li>Select a country</li>
                    <li>Choose a calculation method</li>
                    <li>Set the date</li>
                    <li>Click on the map to get prayer times</li>
                    <li>Click a prayer button to show isochrones</li>
                </ol>
            </section>
        </aside>

        <!-- Map Container -->
        <div class="flex-1 relative">
            <div id="map" class="absolute inset-0"></div>

            <!-- Loading Overlay -->
            <div id="loading-overlay" class="absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center z-[1000] hidden">
                <div class="text-center">
                    <div class="spinner mb-3"></div>
                    <p id="loading-text" class="text-gray-700 font-medium">Loading...</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Status Bar -->
    <footer id="status-bar" class="bg-gray-800 text-white px-4 py-2 text-sm">
        Ready. Select a country to begin.
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <!-- Application Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/praytimes.js"></script>
    <script src="js/data.js"></script>
    <script src="js/isochrones.js"></script>
    <script src="js/map.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
